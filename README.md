# grpc_async_server
Headers-only c++ library to build async (asynchronous) gRpc server that supports unary,
server-side streaming and client-side streaming rpcs.

Environment: gRpc 1.60.0, Ubuntu 22.04, RedHat 7 and 8, gcc with c++17.

You might need to update Makefile to fit your build environment.

Basic example:

1. Derive your service class from gen::GrpcService<your_service>, where your_service is the namespace generated by the gRPC protocol buffer compiler (protoc) for your service definition.

2. Add method in your derived class for each RPC method defined in your service definition.

3. Override OnInit method to bind every method in your derived class with the corresponding method defined in your service definition.

Example:

class HelloService : public gen::GrpcService<test::Hello>
{
public:
    HelloService() = default;
    virtual ~HelloService() = default;

    // gen::GrpcService overrides
    virtual bool OnInit() override
    {
        // Bind all HelloService RPCs
        Bind(&HelloService::Ping, &HelloService::RequestPing);
        Bind(&HelloService::Shutdown, &HelloService::RequestShutdown);
        return true;
    }

protected:
    // Supported RPCs
    void Ping(const gen::RpcContext& ctx,
              const test::PingRequest& req, test::PingResponse& resp)
    {
        ...
    }

    void Shutdown(const gen::RpcContext& ctx,
                  const test::ShutdownRequest& req, test::ShutdownResponse& resp)
    {
        ...
    }
};

4. Derive your server class from gen::GrpcServer.
5. Use your server class contractor to add all supported services.
5. Build and start gRpc server.

Example:

class MyServer : public gen::GrpcServer
{
public:
    MyServer()
    {
        // Add all services
        AddService<HelloService>();
    }
    virtual ~MyServer() = default;
};

int main(int argc, char* argv[])
{
    // Build & start gRpc server.
    MyServer srv;
    srv.Run(PORT_NUMBER, 8 /*number of threads*/);

    std::cout << "Grpc Server has stopped" << std::endl;
    return 0;
}

Complete example:

This example illustrates a more sophisticated gRPC server and client implementation, demonstrating the use of the GrpcClient<> class.




